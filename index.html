<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FigmaClone - Professional Design Tool</title>
    <meta name="description" content="Professional design tool inspired by Figma with advanced features">
    
    <!-- External Dependencies -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-spinner"></div>
        <div class="loading-text">Loading FigmaClone...</div>
    </div>

    <!-- Main Application Layout -->
    <div id="app" class="app">
        <!-- Top Header -->
        <header class="app-header">
            <div class="header-section header-left">
                <div class="logo">
                    <span class="logo-icon">‚¨°</span>
                    <span class="logo-text">FigmaClone</span>
                </div>
                <div class="file-controls">
                    <button class="btn-ghost" id="new-file" title="New File (Ctrl+N)">
                        <span class="icon">üìÑ</span>
                        <span class="text">New</span>
                    </button>
                    <button class="btn-ghost" id="open-file" title="Open File (Ctrl+O)">
                        <span class="icon">üìÇ</span>
                        <span class="text">Open</span>
                    </button>
                    <button class="btn-ghost" id="save-file" title="Save File (Ctrl+S)">
                        <span class="icon">üíæ</span>
                        <span class="text">Save</span>
                    </button>
                </div>
            </div>
            
            <div class="header-section header-center">
                <div class="main-toolbar">
                    <div class="toolbar-group">
                        <button class="tool-btn active" id="tool-select" data-tool="select" title="Select (V)">
                            <span class="icon">‚åÅ</span>
                        </button>
                        <button class="tool-btn" id="tool-frame" data-tool="frame" title="Frame (F)">
                            <span class="icon">‚¨ö</span>
                        </button>
                        <button class="tool-btn" id="tool-rectangle" data-tool="rectangle" title="Rectangle (R)">
                            <span class="icon">‚ñ≠</span>
                        </button>
                        <button class="tool-btn" id="tool-ellipse" data-tool="ellipse" title="Ellipse (O)">
                            <span class="icon">‚óã</span>
                        </button>
                        <button class="tool-btn" id="tool-line" data-tool="line" title="Line (L)">
                            <span class="icon">‚üã</span>
                        </button>
                        <button class="tool-btn" id="tool-arrow" data-tool="arrow" title="Arrow">
                            <span class="icon">‚Üí</span>
                        </button>
                    </div>
                    
                    <div class="toolbar-separator"></div>
                    
                    <div class="toolbar-group">
                        <button class="tool-btn" id="tool-pen" data-tool="pen" title="Pen (P)">
                            <span class="icon">‚úé</span>
                        </button>
                        <button class="tool-btn" id="tool-pencil" data-tool="pencil" title="Pencil (B)">
                            <span class="icon">‚úè</span>
                        </button>
                        <button class="tool-btn" id="tool-text" data-tool="text" title="Text (T)">
                            <span class="icon">T</span>
                        </button>
                    </div>
                    
                    <div class="toolbar-separator"></div>
                    
                    <div class="toolbar-group">
                        <button class="tool-btn" id="tool-component" data-tool="component" title="Component">
                            <span class="icon">‚ßà</span>
                        </button>
                        <button class="tool-btn" id="tool-instance" data-tool="instance" title="Instance">
                            <span class="icon">‚ßâ</span>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="header-section header-right">
                <div class="view-controls">
                    <button class="btn-ghost" id="zoom-out" title="Zoom Out (-)">
                        <span class="icon">üîç‚Åª</span>
                    </button>
                    <div class="zoom-display" id="zoom-display">100%</div>
                    <button class="btn-ghost" id="zoom-in" title="Zoom In (+)">
                        <span class="icon">üîç‚Å∫</span>
                    </button>
                </div>
                <div class="action-controls">
                    <button class="btn-ghost" id="undo" title="Undo (Ctrl+Z)">
                        <span class="icon">‚Ü∂</span>
                    </button>
                    <button class="btn-ghost" id="redo" title="Redo (Ctrl+Y)">
                        <span class="icon">‚Ü∑</span>
                    </button>
                    <button class="btn-primary" id="share-btn">
                        <span class="icon">‚§¥</span>
                        <span class="text">Share</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="app-main">
            <!-- Left Sidebar -->
            <aside class="sidebar sidebar-left" id="left-sidebar">
                <div class="sidebar-header">
                    <h3>Layers</h3>
                    <button class="btn-icon" id="add-layer" title="Add Layer">
                        <span class="icon">‚ûï</span>
                    </button>
                </div>
                <div class="layers-panel" id="layers-panel">
                    <div class="layer-item active" data-layer="0">
                        <div class="layer-icon">üëÅ</div>
                        <div class="layer-name">Canvas</div>
                        <div class="layer-lock">üîì</div>
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <div class="sidebar-header">
                        <h3>Components</h3>
                        <button class="btn-icon" id="add-component" title="Create Component">
                            <span class="icon">‚ßà</span>
                        </button>
                    </div>
                    <div class="components-panel" id="components-panel">
                        <div class="empty-state">
                            <span>No components yet</span>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Canvas Area -->
            <div class="canvas-area">
                <div class="canvas-header">
                    <div class="breadcrumb">
                        <span class="breadcrumb-item">Untitled</span>
                        <span class="breadcrumb-separator">></span>
                        <span class="breadcrumb-item active">Page 1</span>
                    </div>
                    <div class="canvas-controls">
                        <button class="btn-ghost" id="toggle-grid" title="Toggle Grid (Ctrl+')">
                            <span class="icon">‚äû</span>
                        </button>
                        <button class="btn-ghost" id="toggle-rulers" title="Toggle Rulers (Shift+R)">
                            <span class="icon">üìè</span>
                        </button>
                    </div>
                </div>
                
                <div class="canvas-container" id="canvas-container">
                    <canvas id="main-canvas"></canvas>
                    <div class="grid-overlay" id="grid-overlay"></div>
                    <div class="rulers" id="rulers">
                        <div class="ruler ruler-horizontal"></div>
                        <div class="ruler ruler-vertical"></div>
                    </div>
                    <div class="selection-overlay" id="selection-overlay"></div>
                </div>
            </div>

            <!-- Right Sidebar -->
            <aside class="sidebar sidebar-right" id="right-sidebar">
                <div class="properties-panel">
                    <div class="sidebar-header">
                        <h3>Properties</h3>
                    </div>
                    
                    <!-- Design Properties -->
                    <div class="property-section" id="design-properties">
                        <div class="property-group">
                            <label class="property-label">Position</label>
                            <div class="property-row">
                                <div class="input-group">
                                    <label>X</label>
                                    <input type="number" id="prop-x" class="property-input" placeholder="0">
                                </div>
                                <div class="input-group">
                                    <label>Y</label>
                                    <input type="number" id="prop-y" class="property-input" placeholder="0">
                                </div>
                            </div>
                        </div>
                        
                        <div class="property-group">
                            <label class="property-label">Size</label>
                            <div class="property-row">
                                <div class="input-group">
                                    <label>W</label>
                                    <input type="number" id="prop-width" class="property-input" placeholder="100">
                                </div>
                                <div class="input-group">
                                    <label>H</label>
                                    <input type="number" id="prop-height" class="property-input" placeholder="100">
                                </div>
                                <button class="constraint-btn" id="aspect-ratio-lock" title="Lock Aspect Ratio">
                                    <span class="icon">üîó</span>
                                </button>
                            </div>
                        </div>
                        
                        <div class="property-group">
                            <label class="property-label">Rotation</label>
                            <div class="property-row">
                                <input type="number" id="prop-rotation" class="property-input" placeholder="0" step="0.1">
                                <span class="unit">¬∞</span>
                            </div>
                        </div>
                        
                        <div class="property-group">
                            <label class="property-label">Corner Radius</label>
                            <div class="property-row">
                                <input type="number" id="prop-radius" class="property-input" placeholder="0" min="0">
                                <span class="unit">px</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Fill Properties -->
                    <div class="property-section">
                        <div class="section-header">
                            <label class="property-label">Fill</label>
                            <button class="btn-icon" id="add-fill" title="Add Fill">
                                <span class="icon">‚ûï</span>
                            </button>
                        </div>
                        <div class="color-controls" id="fill-controls">
                            <div class="color-item">
                                <div class="color-preview" id="fill-color-preview" style="background: #000;"></div>
                                <input type="text" id="fill-color-input" class="color-input" value="#000000">
                                <button class="color-picker-btn" id="fill-color-picker">
                                    <span class="icon">üé®</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Stroke Properties -->
                    <div class="property-section">
                        <div class="section-header">
                            <label class="property-label">Stroke</label>
                            <button class="btn-icon" id="add-stroke" title="Add Stroke">
                                <span class="icon">‚ûï</span>
                            </button>
                        </div>
                        <div class="color-controls" id="stroke-controls">
                            <div class="color-item">
                                <div class="color-preview" id="stroke-color-preview" style="background: #000;"></div>
                                <input type="text" id="stroke-color-input" class="color-input" value="#000000">
                                <button class="color-picker-btn" id="stroke-color-picker">
                                    <span class="icon">üé®</span>
                                </button>
                                <div class="stroke-width-control">
                                    <label>Width</label>
                                    <input type="number" id="stroke-width" class="property-input" value="1" min="0" step="0.1">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Effects Properties -->
                    <div class="property-section">
                        <div class="section-header">
                            <label class="property-label">Effects</label>
                            <button class="btn-icon" id="add-effect" title="Add Effect">
                                <span class="icon">‚ûï</span>
                            </button>
                        </div>
                        <div class="effects-controls" id="effects-controls">
                            <div class="empty-state">
                                <span>No effects</span>
                            </div>
                        </div>
                    </div>
                </div>
            </aside>
        </main>

        <!-- Floating Panels -->
        <div class="floating-panels">
            <!-- Color Picker Panel -->
            <div class="floating-panel color-picker-panel" id="color-picker-panel">
                <div class="panel-header">
                    <h4>Color Picker</h4>
                    <button class="btn-close" id="close-color-picker">
                        <span class="icon">‚úï</span>
                    </button>
                </div>
                <div class="panel-content">
                    <div class="color-picker-area">
                        <div class="color-gradient" id="color-gradient">
                            <div class="color-pointer" id="color-pointer"></div>
                        </div>
                        <div class="hue-slider" id="hue-slider">
                            <div class="hue-thumb" id="hue-thumb"></div>
                        </div>
                    </div>
                    <div class="color-inputs">
                        <div class="input-group">
                            <label>Hex</label>
                            <input type="text" id="hex-input" class="color-text-input" value="#000000">
                        </div>
                        <div class="input-row">
                            <div class="input-group">
                                <label>R</label>
                                <input type="number" id="r-input" class="color-number-input" min="0" max="255" value="0">
                            </div>
                            <div class="input-group">
                                <label>G</label>
                                <input type="number" id="g-input" class="color-number-input" min="0" max="255" value="0">
                            </div>
                            <div class="input-group">
                                <label>B</label>
                                <input type="number" id="b-input" class="color-number-input" min="0" max="255" value="0">
                            </div>
                        </div>
                    </div>
                    <div class="recent-colors">
                        <label>Recent Colors</label>
                        <div class="color-swatches" id="recent-colors">
                            <div class="color-swatch" style="background: #000;"></div>
                            <div class="color-swatch" style="background: #fff;"></div>
                            <div class="color-swatch" style="background: #f00;"></div>
                            <div class="color-swatch" style="background: #0f0;"></div>
                            <div class="color-swatch" style="background: #00f;"></div>
                        </div>
                    </div>
                    <div class="color-palettes">
                        <label>Color Palettes</label>
                        <div class="palette-grid" id="palette-grid">
                            <!-- Palettes will be populated by JS -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Floating Toolbar -->
            <div class="floating-toolbar" id="floating-toolbar">
                <button class="tool-btn" data-tool="select" title="Select (V)">‚åÅ</button>
                <button class="tool-btn" data-tool="frame" title="Frame (F)">‚¨ö</button>
                <button class="tool-btn" data-tool="rectangle" title="Rectangle (R)">‚ñ≠</button>
                <button class="tool-btn" data-tool="ellipse" title="Ellipse (O)">‚óã</button>
                <button class="tool-btn" data-tool="line" title="Line (L)">‚üã</button>
                <button class="tool-btn" data-tool="pencil" title="Pencil (B)">‚úè</button>
            </div>
        </div>

        <!-- Context Menu -->
        <div class="context-menu" id="context-menu">
            <div class="menu-item" data-action="copy">
                <span class="icon">üìã</span>
                <span class="text">Copy</span>
                <span class="shortcut">Ctrl+C</span>
            </div>
            <div class="menu-item" data-action="paste">
                <span class="icon">üìÑ</span>
                <span class="text">Paste</span>
                <span class="shortcut">Ctrl+V</span>
            </div>
            <div class="menu-separator"></div>
            <div class="menu-item" data-action="duplicate">
                <span class="icon">‚ßâ</span>
                <span class="text">Duplicate</span>
                <span class="shortcut">Ctrl+D</span>
            </div>
            <div class="menu-item" data-action="delete">
                <span class="icon">üóë</span>
                <span class="text">Delete</span>
                <span class="shortcut">Del</span>
            </div>
            <div class="menu-separator"></div>
            <div class="menu-item" data-action="bring-front">
                <span class="icon">‚¨Ü</span>
                <span class="text">Bring to Front</span>
            </div>
            <div class="menu-item" data-action="send-back">
                <span class="icon">‚¨á</span>
                <span class="text">Send to Back</span>
            </div>
        </div>

        <!-- Toast Notifications -->
        <div class="toast-container" id="toast-container"></div>

        <!-- Hidden File Input -->
        <input type="file" id="file-input" accept=".json,.fig" style="display: none;">
    </div>

    <!-- Scripts -->
    <script src="script.js"></script>
</body>
</html>